/*! For license information please see 591.d0e7dfec.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[591],{3591:function(s,e,t){t.r(e),t.d(e,{default:function(){return ps}});var r=t(1413),o=t(5671),a=t(3144),i=t(136),n=t(8557),l=t(2791),c=t(8687),u=t(7781),d=t(4294),f=t(2932),p=t(8880),h="Profile_profile__0XleF",m=t(885),_=t(2700),x="ProfileInfo_avatar__Xr4LM",v="ProfileInfo_content__C9VSG",j="ProfileInfo_info__T9EEc",P="ProfileInfo_info_username__C2B1R",g="ProfileInfo_info_status__XN1xZ",I="ProfileInfo_info_employmentStatus__xht7c",N="ProfileInfo_info_skills__Q89A9",b="ProfileInfo_info_aboutMe__wIzTB",k="ProfileInfo_editButton__JulSp",S="ProfileInfo_contacts__byYDk",U="ProfileInfo_contacts_block__gyfVQ",y="ProfileInfo_contacts_title__8uvh4",w="ProfileInfo_contacts_item__ICHxg",C="ProfileInfo_contacts_link__Ztz3g",Z="ProfileInfo_fileloader__hXR8V",A="ProfileInfo_fileloaderButton__WEw2W",F="ProfileInfo_tooltip__tKIE9",D="ProfileInfo_formSummaryError__rabRb",M=t(4240),O=t(704),E=t(3079),V=t(4189),T=t(184),G=function(s){var e=(0,l.useState)(!1),t=(0,m.Z)(e,2),r=t[0],o=t[1],a=(0,l.useState)(s.status),i=(0,m.Z)(a,2),n=i[0],c=i[1];(0,l.useEffect)((function(){c(s.status)}),[s.status]);return(0,T.jsx)(T.Fragment,{children:r?(0,T.jsx)("input",{id:"mainStatusInput",className:g,autoFocus:!0,onChange:function(s){c(s.currentTarget.value)},onBlur:function(){o(!1),s.updateUserStatus(n)},defaultValue:n}):(0,T.jsxs)("div",{className:g,onClick:function(){o(!0)},children:[(0,T.jsx)("b",{children:"status:"})," ",s.status||"write something"]})})},z=(0,E.D)(50),J=(0,E.D)(100),B=(0,E.D)(200),L=(0,O.Z)({form:"edit-profile",enableReinitialize:!0,destroyOnUnmount:!1})((function(s){var e=s.handleSubmit,t=s.isOwner,r=s.profile,o=s.status,a=s.updateUserStatus,i=s.error;return(0,T.jsxs)("form",{className:j,onSubmit:e,children:[t&&(0,T.jsx)("button",{className:k,children:"save"}),(0,T.jsx)("div",{className:P,children:(0,V.Gr)("edit name","fullName",[E.C,z],V.II)}),(0,T.jsx)(G,{profile:r,status:o,updateUserStatus:a}),(0,T.jsxs)("div",{className:I,children:[(0,V.Gr)("","lookingForAJob",[],V.II,{type:"checkbox"}),(0,T.jsx)("label",{htmlFor:"lookingForAJob",children:"Looking for a job!"})]}),(0,T.jsx)("div",{className:N,children:(0,V.Gr)("my skills","lookingForAJobDescription",[E.C,J],V.gx)}),(0,T.jsx)("div",{className:b,children:(0,V.Gr)("about me","aboutMe",[E.C,B],V.gx)}),(0,T.jsxs)("div",{className:S,children:[(0,T.jsx)("div",{className:y,children:"Contacts:"}),i&&(0,T.jsx)("div",{className:D,children:i}),(0,T.jsx)("div",{className:U,children:Object.keys(r.contacts).map((function(s){return(0,T.jsx)("div",{className:w,children:(0,V.Gr)("".concat(s,".com"),"contacts."+s.toLocaleLowerCase(),[],V.II)},s)}))})]})]})})),R=function(s){var e=s.contactValue,t="https://".concat(e);return(0,T.jsx)(T.Fragment,{children:e&&(0,T.jsx)("div",{className:w,children:(0,T.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",className:C,children:e})})})},X=function(s){var e=s.profile,t=s.isOwner,r=s.goToEditMode,o=s.status,a=s.updateUserStatus;return(0,T.jsxs)(T.Fragment,{children:[t&&(0,T.jsx)("button",{className:k,onClick:r,children:"edit mode"}),(0,T.jsxs)("div",{className:j,children:[(0,T.jsx)("div",{className:P,children:e.fullName}),(0,T.jsx)(G,{profile:e,status:o,updateUserStatus:a}),(0,T.jsxs)("div",{className:I,children:[(0,T.jsx)("b",{children:"employment: "}),e.lookingForAJob?"Looking for a job!":"I'm already employed"]}),(0,T.jsxs)("div",{className:N,children:[(0,T.jsx)("b",{children:"skills:"})," ",e.lookingForAJobDescription]}),(0,T.jsxs)("div",{className:b,children:[(0,T.jsx)("b",{children:"about me:"})," ",e.aboutMe]}),(0,T.jsxs)("div",{className:S,children:[(0,T.jsx)("div",{className:y,children:"contacts:"}),(0,T.jsx)("div",{className:U,children:Object.keys(e.contacts).map((function(s){return(0,T.jsx)(R,{contactTitle:s,contactValue:e.contacts[s]},s)}))})]})]})]})},q=function(s){var e=s.profile,t=s.status,r=s.updateUserStatus,o=s.isOwner,a=s.savePhoto,i=s.saveProfile,n=(0,l.useState)(!1),c=(0,m.Z)(n,2),u=c[0],d=c[1];if(!e)return(0,T.jsx)(_.Z,{});return(0,T.jsxs)("div",{className:v,children:[(0,T.jsx)("img",{className:x,src:e.photos.large?e.photos.large:M,alt:"avatar"}),o&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("input",{id:"avatarInput",className:Z,type:"file",onChange:function(s){var e;null!==(e=s.target.files)&&void 0!==e&&e.length&&a(s.target.files[0])}}),(0,T.jsxs)("div",{className:A,onClick:function(s){var e;s.preventDefault(),null===(e=document.getElementById("avatarInput"))||void 0===e||e.click()},children:["\u273f ",(0,T.jsx)("span",{className:F,children:"Upload photo"})]})]}),u?(0,T.jsx)(L,{initialValues:e,profile:e,status:t,updateUserStatus:r,isOwner:o,onSubmit:function(s){i(s).then((function(){d(!1)}))}}):(0,T.jsx)(X,{profile:e,status:t,updateUserStatus:r,isOwner:o,goToEditMode:function(){d(!0)}})]})},Q=t(2982),$=t(8008);var K=t.p+"static/media/icon_liked.43de9c4003eb317a4ca47f5771d2d0e7.svg",W="Post_item__IVs4O",Y="Post_post_wrap__zYVt2",H="Post_avatar__6eGNa",ss="Post_likes__3e+38",es=function(s){return(0,T.jsxs)("div",{className:W,children:[(0,T.jsxs)("div",{className:Y,children:[(0,T.jsx)("img",{className:H,src:$,alt:"avatar"}),(0,T.jsx)("p",{children:s.message})]}),(0,T.jsxs)("div",{className:ss,children:[(0,T.jsx)("img",{src:K,alt:"likes"}),(0,T.jsx)("span",{children:s.count})]})]})},ts="MyPosts_button__1+FKV",rs="MyPosts_title__VyQI1",os="MyPosts_posts__TqAU7",as="MyPosts_postForm__Mb4Ae",is=(0,E.D)(20),ns=(0,O.Z)({form:"profile-add-post"})((function(s){return(0,T.jsxs)("form",{onSubmit:s.handleSubmit,className:as,children:[(0,V.Gr)("Enter your message","newPostText",[E.C,is],V.gx),(0,T.jsx)("button",{className:ts,children:"Add post"})]})})),ls=function(s){var e=(0,Q.Z)(s.posts).reverse().map((function(s){return(0,T.jsx)(es,{message:s.post,count:s.likesCount},s.id)}));return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("p",{className:rs,children:"My posts"}),(0,T.jsx)(ns,{onSubmit:function(e){s.addPost(e.newPostText)}}),(0,T.jsx)("div",{className:os,children:e})]})},cs=l.memo(ls),us=(0,c.$j)((function(s){return{posts:s.profilePage.posts}}),{addPost:d.Nw.addPostActionCreator})(cs),ds=function(s){return(0,T.jsxs)("div",{className:h,children:[(0,T.jsx)(q,{profile:s.profile,status:s.status,updateUserStatus:s.updateUserStatus,isOwner:s.isOwner,savePhoto:s.savePhoto,saveProfile:s.saveProfile}),(0,T.jsx)(us,{})]})},fs=function(s){(0,i.Z)(t,s);var e=(0,n.Z)(t);function t(){return(0,o.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"refreshProfile",value:function(){var s=+this.props.routerUserId;if(s||(s=this.props.authorizedUserId)||this.props.routerNavigate("/login"),!s)throw new Error('ID should exists in URI params or in state ("authorizedUserId")');this.props.getUserProfile(s),this.props.getUserStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e){this.props.routerUserId!==s.routerUserId&&this.refreshProfile()}},{key:"render",value:function(){return(0,T.jsx)(ds,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.routerUserId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus}))}}]),t}(l.Component),ps=(0,u.qC)((0,c.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getUserProfile:d.et,getUserStatus:d.Tq,updateUserStatus:d.OL,savePhoto:d.Ju,saveProfile:d.Ii}),f.D,p.E)(fs)},2932:function(s,e,t){t.d(e,{D:function(){return u}});var r=t(1413),o=t(5987),a=(t(2791),t(8687)),i=t(6871),n=t(184),l=["isAuth"],c=function(s){return{isAuth:s.auth.isAuth}};function u(s){return(0,a.$j)(c,{})((function(e){var t=e.isAuth,a=(0,o.Z)(e,l);return t?(0,n.jsx)(s,(0,r.Z)({},a)):(0,n.jsx)(i.Fg,{to:"/login"})}))}},4240:function(s,e,t){s.exports=t.p+"static/media/avatar-wh.486e31f96fe3d177b122.png"},8008:function(s,e,t){s.exports=t.p+"static/media/avatar_own.aa75b7dbc1822fa96e84.jpg"}}]);
//# sourceMappingURL=591.d0e7dfec.chunk.js.map