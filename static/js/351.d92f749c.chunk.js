"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[351],{7351:function(e,t,s){s.r(t),s.d(t,{default:function(){return me}});var r=s(1413),o=s(5671),a=s(3144),n=s(136),i=s(5716),l=s(2791),c=s(7781),u=s(8687),f=s(6070),d=s(5628),p="Profile_profile__0XleF",m=s(885),h=s(8879),_="ProfileInfo_avatar__Xr4LM",x="ProfileInfo_content__C9VSG",j="ProfileInfo_info__T9EEc",v="ProfileInfo_info_username__C2B1R",P="ProfileInfo_info_status__XN1xZ",g="ProfileInfo_info_employmentStatus__xht7c",I="ProfileInfo_info_skills__Q89A9",N="ProfileInfo_info_aboutMe__wIzTB",b="ProfileInfo_editButton__JulSp",k="ProfileInfo_contacts__byYDk",S="ProfileInfo_contacts_block__gyfVQ",y="ProfileInfo_contacts_title__8uvh4",w="ProfileInfo_contacts_item__ICHxg",U="ProfileInfo_contacts_link__Ztz3g",C="ProfileInfo_fileloader__hXR8V",Z="ProfileInfo_fileloaderButton__WEw2W",F="ProfileInfo_tooltip__tKIE9",O="ProfileInfo_formSummaryError__rabRb",A=s(4240),D=s(704),T=s(5304),V=s(9528),E=s(184),M=(0,T.D)(40),J=function(e){var t=(0,l.useState)(!1),s=(0,m.Z)(t,2),r=s[0],o=s[1],a=(0,l.useState)(e.status),n=(0,m.Z)(a,2),i=n[0],c=n[1];(0,l.useEffect)((function(){c(e.status)}),[e.status]);return(0,E.jsx)(E.Fragment,{children:r?(0,E.jsx)("input",{id:"mainStatusInput",className:P,autoFocus:!0,validate:[M],onChange:function(e){c(e.currentTarget.value)},onBlur:function(){o(!1),e.updateUserStatus(i)},defaultValue:i}):(0,E.jsxs)("div",{className:P,onClick:function(){o(!0),setTimeout((function(){document.querySelector("#mainStatusInput").select()}),300)},children:[(0,E.jsx)("b",{children:"status:"})," ",e.status||"write something"]})})},B=(0,T.D)(50),G=(0,T.D)(100),z=(0,T.D)(200),L=(0,D.Z)({form:"edit-profile",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){return(0,E.jsxs)("form",{className:j,onSubmit:e.handleSubmit,children:[e.isOwner&&(0,E.jsx)("button",{className:b,children:"save"}),(0,E.jsx)("div",{className:v,children:(0,V.Gr)("edit name","fullName",[T.C,B],V.II)}),(0,E.jsx)(J,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),(0,E.jsxs)("div",{className:g,children:[(0,V.Gr)("","lookingForAJob",[],V.II,{type:"checkbox"}),(0,E.jsx)("label",{htmlFor:"lookingForAJob",children:"Looking for a job!"})]}),(0,E.jsx)("div",{className:I,children:(0,V.Gr)("my skills","lookingForAJobDescription",[T.C,G],V.gx)}),(0,E.jsx)("div",{className:N,children:(0,V.Gr)("about me","aboutMe",[T.C,z],V.gx)}),(0,E.jsxs)("div",{className:k,children:[(0,E.jsx)("div",{className:y,children:"Contacts:"}),e.error&&(0,E.jsx)("div",{className:O,children:e.error}),(0,E.jsx)("div",{className:S,children:Object.keys(e.profile.contacts).map((function(e){return(0,E.jsx)("div",{className:w,children:(0,V.Gr)("".concat(e,".com"),"contacts."+e.toLocaleLowerCase(),[],V.II)},e)}))})]})]})})),q=function(e){var t="https://".concat(e.contactValue);return(0,E.jsx)(E.Fragment,{children:e.contactValue&&(0,E.jsx)("div",{className:w,children:(0,E.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",className:U,children:e.contactValue})})})},R=function(e){return(0,E.jsxs)(E.Fragment,{children:[e.isOwner&&(0,E.jsx)("button",{className:b,onClick:e.goToEditMode,children:"edit mode"}),(0,E.jsxs)("div",{className:j,children:[(0,E.jsx)("div",{className:v,children:e.profile.fullName}),(0,E.jsx)(J,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),(0,E.jsxs)("div",{className:g,children:[(0,E.jsx)("b",{children:"employment: "}),e.profile.lookingForAJob?"Looking for a job!":"I'm already employed"]}),(0,E.jsxs)("div",{className:I,children:[(0,E.jsx)("b",{children:"skills:"})," ",e.profile.lookingForAJobDescription]}),(0,E.jsxs)("div",{className:N,children:[(0,E.jsx)("b",{children:"about me:"})," ",e.profile.aboutMe]}),(0,E.jsxs)("div",{className:k,children:[(0,E.jsx)("div",{className:y,children:"contacts:"}),(0,E.jsx)("div",{className:S,children:Object.keys(e.profile.contacts).map((function(t){return(0,E.jsx)(q,{contactTitle:t,contactValue:e.profile.contacts[t]},t)}))})]})]})]})},X=function(e){var t=(0,l.useState)(!1),s=(0,m.Z)(t,2),r=s[0],o=s[1];if(!e.profile)return(0,E.jsx)(h.Z,{});return(0,E.jsxs)("div",{className:x,children:[(0,E.jsx)("img",{className:_,src:e.profile.photos.large?e.profile.photos.large:A,alt:"avatar"}),e.isOwner&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("input",{id:"avatarInput",className:C,type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}}),(0,E.jsxs)("div",{className:Z,onClick:function(e){e.preventDefault(),document.getElementById("avatarInput").click()},children:["\u273f ",(0,E.jsx)("span",{className:F,children:"Upload photo"})]})]}),r?(0,E.jsx)(L,{initialValues:e.profile,profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,isOwner:e.isOwner,onSubmit:function(t){e.saveProfile(t).then((function(){o(!1)}))}}):(0,E.jsx)(R,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,isOwner:e.isOwner,goToEditMode:function(){o(!0)}})]})},Q=s(2982),W=s(8008);var $=s.p+"static/media/icon_liked.43de9c4003eb317a4ca47f5771d2d0e7.svg",K="Post_item__IVs4O",Y="Post_post_wrap__zYVt2",H="Post_avatar__6eGNa",ee="Post_likes__3e+38",te=function(e){return(0,E.jsxs)("div",{className:K,children:[(0,E.jsxs)("div",{className:Y,children:[(0,E.jsx)("img",{className:H,src:W,alt:"avatar"}),(0,E.jsx)("p",{children:e.message})]}),(0,E.jsxs)("div",{className:ee,children:[(0,E.jsx)("img",{src:$,alt:"likes"}),(0,E.jsx)("span",{children:e.count})]})]})},se="MyPosts_button__1+FKV",re="MyPosts_title__VyQI1",oe="MyPosts_posts__TqAU7",ae="MyPosts_textarea__El2JB",ne=s(6139),ie=(0,T.D)(20),le=(0,D.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,E.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,E.jsx)(ne.Z,{component:V.gx,name:"newPostText",placeholder:"Enter your message",className:ae,validate:[T.C,ie],type:"textarea"}),(0,E.jsx)("button",{className:se,children:"Add post"})]})})),ce=(0,l.memo)((function(e){var t=(0,Q.Z)(e.posts).reverse().map((function(e){return(0,E.jsx)(te,{message:e.post,count:e.likesCount},e.id)}));return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{className:re,children:"My posts"}),(0,E.jsx)(le,{onSubmit:function(t){e.addPost(t.newPostText)}}),(0,E.jsx)("div",{className:oe,children:t})]})})),ue=(0,c.qC)((0,u.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e((0,f.Wl)(t))}}})))(ce),fe=function(e){return(0,E.jsxs)("div",{className:p,children:[(0,E.jsx)(X,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,E.jsx)(ue,{})]})},de=s(1548),pe=function(e){(0,n.Z)(s,e);var t=(0,i.Z)(s);function s(){return(0,o.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.router.params.userId;e||(e=this.props.authorizedUserId)||this.props.router.navigate("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.router.params.userId!==e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,E.jsx)(fe,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus}))}}]),s}(l.Component),me=(0,c.qC)((0,u.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:f.et,getUserStatus:f.Tq,updateUserStatus:f.OL,savePhoto:f.Ju,saveProfile:f.Ii}),d.E,de.D)(pe)},1548:function(e,t,s){s.d(t,{D:function(){return l}});var r=s(1413),o=(s(2791),s(8687)),a=s(6871),n=s(184),i=function(e){return{isAuth:e.auth.isAuth}},l=function(e){return(0,o.$j)(i)((function(t){return t.isAuth?(0,n.jsx)(e,(0,r.Z)({},t)):(0,n.jsx)(a.Fg,{to:"/login",replace:!0})}))}},4240:function(e,t,s){e.exports=s.p+"static/media/avatar-wh.486e31f96fe3d177b122.png"},8008:function(e,t,s){e.exports=s.p+"static/media/avatar_own.aa75b7dbc1822fa96e84.jpg"}}]);
//# sourceMappingURL=351.d92f749c.chunk.js.map