"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[757],{757:function(t,n,e){e.r(n),e.d(n,{default:function(){return A},useAppDispatch:function(){return P}});var o=e(885),i=e(4942),a=e(1694),s=e.n(a);function c(t,n,e){var o=(e||{}).atBegin;return function(t,n,e){var o,i=e||{},a=i.noTrailing,s=void 0!==a&&a,c=i.noLeading,r=void 0!==c&&c,l=i.debounceMode,p=void 0===l?void 0:l,u=!1,d=0;function m(){o&&clearTimeout(o)}function g(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];var c=this,l=Date.now()-d;function g(){d=Date.now(),n.apply(c,i)}function h(){o=void 0}u||(r||!p||o||g(),m(),void 0===p&&l>t?r?(d=Date.now(),s||(o=setTimeout(p?h:g,t))):g():!0!==s&&(o=setTimeout(p?h:g,void 0===p?t-l:t)))}return g.cancel=function(t){var n=(t||{}).upcomingOnly,e=void 0!==n&&n;m(),u=!e},g}(t,n,{debounceMode:!1!==(void 0!==o&&o)})}var r=e(1818),l=e(2791),p=e(1929),u=e(1113),d=e(3814),m=e(5564),g=e(9922),h=e(7521),f=new d.E4("antSpinMove",{to:{opacity:1}}),v=new d.E4("antRotate",{to:{transform:"rotate(405deg)"}}),x=function(t){var n,e,o,a,s;return(0,i.Z)({},"".concat(t.componentCls),Object.assign(Object.assign({},(0,h.Wf)(t)),(s={position:"absolute",display:"none",color:t.colorPrimary,textAlign:"center",verticalAlign:"middle",opacity:0,transition:"transform ".concat(t.motionDurationSlow," ").concat(t.motionEaseInOutCirc),"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":(a={position:"relative"},(0,i.Z)(a,"> div > ".concat(t.componentCls),(o={position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:t.contentHeight},(0,i.Z)(o,"".concat(t.componentCls,"-dot"),{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-t.spinDotSize/2}),(0,i.Z)(o,"".concat(t.componentCls,"-text"),{position:"absolute",top:"50%",width:"100%",paddingTop:(t.spinDotSize-t.fontSize)/2+2,textShadow:"0 1px 2px ".concat(t.colorBgContainer)}),(0,i.Z)(o,"&".concat(t.componentCls,"-show-text ").concat(t.componentCls,"-dot"),{marginTop:-t.spinDotSize/2-10}),(0,i.Z)(o,"&-sm",(n={},(0,i.Z)(n,"".concat(t.componentCls,"-dot"),{margin:-t.spinDotSizeSM/2}),(0,i.Z)(n,"".concat(t.componentCls,"-text"),{paddingTop:(t.spinDotSizeSM-t.fontSize)/2+2}),(0,i.Z)(n,"&".concat(t.componentCls,"-show-text ").concat(t.componentCls,"-dot"),{marginTop:-t.spinDotSizeSM/2-10}),n)),(0,i.Z)(o,"&-lg",(e={},(0,i.Z)(e,"".concat(t.componentCls,"-dot"),{margin:-t.spinDotSizeLG/2}),(0,i.Z)(e,"".concat(t.componentCls,"-text"),{paddingTop:(t.spinDotSizeLG-t.fontSize)/2+2}),(0,i.Z)(e,"&".concat(t.componentCls,"-show-text ").concat(t.componentCls,"-dot"),{marginTop:-t.spinDotSizeLG/2-10}),e)),o)),(0,i.Z)(a,"".concat(t.componentCls,"-container"),{position:"relative",transition:"opacity ".concat(t.motionDurationSlow),"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:t.colorBgContainer,opacity:0,transition:"all ".concat(t.motionDurationSlow),content:'""',pointerEvents:"none"}}),(0,i.Z)(a,"".concat(t.componentCls,"-blur"),(0,i.Z)({clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none"},"&::after",{opacity:.4,pointerEvents:"auto"})),a)},(0,i.Z)(s,"&-tip",{color:t.spinDotDefault}),(0,i.Z)(s,"".concat(t.componentCls,"-dot"),{position:"relative",display:"inline-block",fontSize:t.spinDotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(t.spinDotSize-t.marginXXS/2)/2,height:(t.spinDotSize-t.marginXXS/2)/2,backgroundColor:t.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:f,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:v,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}}),(0,i.Z)(s,"&-sm ".concat(t.componentCls,"-dot"),{fontSize:t.spinDotSizeSM,i:{width:(t.spinDotSizeSM-t.marginXXS/2)/2,height:(t.spinDotSizeSM-t.marginXXS/2)/2}}),(0,i.Z)(s,"&-lg ".concat(t.componentCls,"-dot"),{fontSize:t.spinDotSizeLG,i:{width:(t.spinDotSizeLG-t.marginXXS)/2,height:(t.spinDotSizeLG-t.marginXXS)/2}}),(0,i.Z)(s,"&".concat(t.componentCls,"-show-text ").concat(t.componentCls,"-text"),{display:"block"}),s)))},S=(0,m.Z)("Spin",(function(t){var n=(0,g.TS)(t,{spinDotDefault:t.colorTextDescription,spinDotSize:t.controlHeightLG/2,spinDotSizeSM:.35*t.controlHeightLG,spinDotSizeLG:t.controlHeight});return[x(n)]}),{contentHeight:400}),y=function(t,n){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.indexOf(o)<0&&(e[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)n.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(e[o[i]]=t[o[i]])}return e},b=null;var C=function(t){var n,e=t.spinPrefixCls,a=t.spinning,d=void 0===a||a,m=t.delay,g=void 0===m?0:m,h=t.className,f=t.rootClassName,v=t.size,x=void 0===v?"default":v,S=t.tip,C=t.wrapperClassName,D=t.style,j=t.children,w=t.hashId,z=y(t,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),Z=l.useState((function(){return d&&!function(t,n){return!!t&&!!n&&!isNaN(Number(n))}(d,g)})),E=(0,o.Z)(Z,2),N=E[0],I=E[1];l.useEffect((function(){if(d){var t=c(g,(function(){I(!0)}));return t(),function(){var n;null===(n=null===t||void 0===t?void 0:t.cancel)||void 0===n||n.call(t)}}I(!1)}),[g,d]);var O=l.useMemo((function(){return"undefined"!==typeof j}),[j]),T=l.useContext(p.E_).direction,k=s()(e,(n={},(0,i.Z)(n,"".concat(e,"-sm"),"small"===x),(0,i.Z)(n,"".concat(e,"-lg"),"large"===x),(0,i.Z)(n,"".concat(e,"-spinning"),N),(0,i.Z)(n,"".concat(e,"-show-text"),!!S),(0,i.Z)(n,"".concat(e,"-rtl"),"rtl"===T),n),h,f,w),P=s()("".concat(e,"-container"),(0,i.Z)({},"".concat(e,"-blur"),N)),_=(0,r.Z)(z,["indicator","prefixCls"]),L=l.createElement("div",Object.assign({},_,{style:D,className:k,"aria-live":"polite","aria-busy":N}),function(t,n){var e=n.indicator,o="".concat(t,"-dot");return null===e?null:(0,u.l$)(e)?(0,u.Tm)(e,{className:s()(e.props.className,o)}):(0,u.l$)(b)?(0,u.Tm)(b,{className:s()(b.props.className,o)}):l.createElement("span",{className:s()(o,"".concat(t,"-dot-spin"))},l.createElement("i",{className:"".concat(t,"-dot-item")}),l.createElement("i",{className:"".concat(t,"-dot-item")}),l.createElement("i",{className:"".concat(t,"-dot-item")}),l.createElement("i",{className:"".concat(t,"-dot-item")}))}(e,t),S?l.createElement("div",{className:"".concat(e,"-text")},S):null);return O?l.createElement("div",Object.assign({},_,{className:s()("".concat(e,"-nested-loading"),C,w)}),N&&l.createElement("div",{key:"loading"},L),l.createElement("div",{className:P,key:"container"},j)):L},D=function(t){var n=t.prefixCls,e=(0,l.useContext(p.E_).getPrefixCls)("spin",n),i=S(e),a=(0,o.Z)(i,2),s=a[0],c=a[1],r=Object.assign(Object.assign({},t),{spinPrefixCls:e,hashId:c});return s(l.createElement(C,Object.assign({},r)))};D.setDefaultIndicator=function(t){b=t};var j=D,w=e(8687),z=function(t){return t.auth.isAuth},Z=e(8047),E=e(8240),N="ChatPage_messagesBlock__qTuLP",I="ChatPage_messageForm__cdsL7",O="ChatPage_notLogged__edreR",T="ChatPage_spinner__AuyjA",k=e(184),P=function(){return(0,w.I0)()},_=function(){var t=P(),n=(0,w.v9)((function(t){return t.chat.status}));return(0,l.useEffect)((function(){return t((0,Z.WE)()),function(){t((0,Z.R7)())}}),[t]),(0,k.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:["error"===n&&(0,k.jsx)("div",{children:"Some error occured. Please refresh page"}),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(L,{}),(0,k.jsx)(X,{isAuth:!0})]})]})},L=function(){var t=(0,w.v9)((function(t){return t.chat.messages})),n=(0,l.useRef)(null),e=(0,l.useState)(!0),i=(0,o.Z)(e,2),a=i[0],s=i[1];return(0,l.useEffect)((function(){var t;a&&(null===(t=n.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}))}),[a,t]),(0,k.jsxs)("div",{className:N,style:{height:"100%",overflowY:"auto",marginBottom:"10px"},onScroll:function(t){var n=null===t||void 0===t?void 0:t.currentTarget,e=n.scrollHeight-n.scrollTop;Math.abs(e-n.clientHeight)<200?!a&&s(!0):a&&s(!1)},children:[t.map((function(t,n){return(0,k.jsx)(M,{message:t},t.id)})),(0,k.jsx)("div",{ref:n})]})},M=l.memo((function(t){var n=t.message,o=e(8308);return(0,k.jsxs)("div",{children:[n.photo?(0,k.jsx)("img",{src:n.photo,alt:"",style:{width:"30px",borderRadius:"50%",marginRight:"10px"}}):(0,k.jsx)("img",{src:o,alt:"",style:{width:"30px",borderRadius:"50%",marginRight:"10px"}}),(0,k.jsx)("span",{style:{fontSize:"1.2em"},children:(0,k.jsx)("strong",{children:n.userName})}),(0,k.jsx)("p",{style:{margin:"5px 0 0 40px",fontSize:"1.2em"},children:n.message}),(0,k.jsx)("div",{style:{margin:"1em 0",width:"calc(100% - 10px)",height:"2px",background:"rgba(0, 0, 0, 0.1)"}})]})})),X=function(t){var n=t.isAuth,e=(0,l.useState)(""),i=(0,o.Z)(e,2),a=i[0],s=i[1],c=P(),r="ready"!==(0,w.v9)((function(t){return t.chat.status})),p=function(){if(a){var t=new Date,n=String(t.getHours()+":"+t.getMinutes()),e="".concat(a," [").concat(n,"]");e.length>100?alert("\u041c\u043e\u0436\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u0437\u043d\u0430\u043a\u043e\u0432,\n            \u0430 \u0441\u0435\u0439\u0447\u0430\u0441 \u0443\u0436\u0435 ".concat(e.length)):(console.log("\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",(0,E.XW)()),c((0,Z.bG)(e)),s(""))}else alert("\u041f\u0443\u0441\u0442\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c!")};return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{className:I,children:[(0,k.jsx)("div",{children:(0,k.jsx)("textarea",{onChange:function(t){s(t.target.value)},value:a,placeholder:'Press Ctrl + Enter to send a message or button "Send".\nYou can\'t send more than 100 symbols.',onKeyPress:function(t){if(t.ctrlKey&&"Enter"===t.code){if(r)return void console.log("\u0445\u043e\u0442\u0435\u043b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 Ctrl + Enter \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f");p()}}})}),(0,k.jsx)("div",{className:O,children:n?"":"Chat works only for login users!"}),(0,k.jsx)("div",{children:r?(0,k.jsx)(j,{className:T}):(0,k.jsx)("button",{onClick:function(){p()},children:"Send"})})]})})},A=function(){var t=(0,w.v9)(z);return(0,k.jsx)("div",{style:{padding:"10px",height:"100%",background:"white"},children:t?(0,k.jsx)(_,{}):(0,k.jsx)(X,{isAuth:t})})}}}]);
//# sourceMappingURL=757.684d8cb7.chunk.js.map