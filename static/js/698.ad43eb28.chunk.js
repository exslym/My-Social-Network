"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[698],{3698:function(e,s,t){t.r(s),t.d(s,{default:function(){return de}});var r=t(1413),o=t(5671),a=t(3144),i=t(136),n=t(5716),l=t(2791),c=t(7781),u=t(8687),f=t(6070),d=t(6871),p=t(184),m="Profile_app_profile__eUKXI",h=t(885),_=t(8879),x="ProfileInfo_avatar__Xr4LM",j="ProfileInfo_content__C9VSG",v="ProfileInfo_info__T9EEc",P="ProfileInfo_info_username__C2B1R",g="ProfileInfo_info_status__XN1xZ",I="ProfileInfo_info_employmentStatus__xht7c",b="ProfileInfo_info_skills__Q89A9",N="ProfileInfo_info_aboutMe__wIzTB",k="ProfileInfo_editButton__JulSp",S="ProfileInfo_contacts__byYDk",y="ProfileInfo_contacts_block__gyfVQ",U="ProfileInfo_contacts_title__8uvh4",w="ProfileInfo_contacts_item__ICHxg",C="ProfileInfo_contacts_link__Ztz3g",Z="ProfileInfo_fileloader__hXR8V",O="ProfileInfo_fileloaderButton__WEw2W",F="ProfileInfo_tooltip__tKIE9",T="ProfileInfo_formSummaryError__rabRb",V=t(4240),M=t(704),A=t(5304),E=t(9528),D=function(e){var s=(0,l.useState)(!1),t=(0,h.Z)(s,2),r=t[0],o=t[1],a=(0,l.useState)(e.status),i=(0,h.Z)(a,2),n=i[0],c=i[1];(0,l.useEffect)((function(){c(e.status)}),[e.status]);return(0,p.jsx)(p.Fragment,{children:r?(0,p.jsx)("input",{id:"mainStatusInput",className:g,autoFocus:!0,onChange:function(e){c(e.currentTarget.value)},onBlur:function(){o(!1),e.updateUserStatus(n)},defaultValue:n}):(0,p.jsxs)("div",{className:g,onClick:function(){o(!0),setTimeout((function(){document.querySelector("#mainStatusInput").select()}),300)},children:[(0,p.jsx)("b",{children:"status:"})," ",e.status||"write something"]})})},J=(0,A.D)(50),B=(0,A.D)(100),G=(0,A.D)(200),z=(0,M.Z)({form:"edit-profile",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){return(0,p.jsxs)("form",{className:v,onSubmit:e.handleSubmit,children:[e.isOwner&&(0,p.jsx)("button",{className:k,children:"save"}),(0,p.jsx)("div",{className:P,children:(0,E.Gr)("edit name","fullName",[A.C,J],E.II)}),(0,p.jsx)(D,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),(0,p.jsxs)("div",{className:I,children:[(0,E.Gr)("","lookingForAJob",[],E.II,{type:"checkbox"}),(0,p.jsx)("label",{htmlFor:"lookingForAJob",children:"Looking for a job!"})]}),(0,p.jsx)("div",{className:b,children:(0,E.Gr)("my skills","lookingForAJobDescription",[A.C,B],E.gx)}),(0,p.jsx)("div",{className:N,children:(0,E.Gr)("about me","aboutMe",[A.C,G],E.gx)}),(0,p.jsxs)("div",{className:S,children:[(0,p.jsx)("div",{className:U,children:"Contacts:"}),e.error&&(0,p.jsx)("div",{className:T,children:e.error}),(0,p.jsx)("div",{className:y,children:Object.keys(e.profile.contacts).map((function(e){return(0,p.jsx)("div",{className:w,children:(0,E.Gr)("".concat(e,".com"),"contacts."+e.toLocaleLowerCase(),[],E.II)},e)}))})]})]})})),L=function(e){var s="https://".concat(e.contactValue);return(0,p.jsx)(p.Fragment,{children:e.contactValue&&(0,p.jsx)("div",{className:w,children:(0,p.jsx)("a",{href:s,target:"_blank",rel:"noreferrer",className:C,children:e.contactValue})})})},q=function(e){return(0,p.jsxs)(p.Fragment,{children:[e.isOwner&&(0,p.jsx)("button",{className:k,onClick:e.goToEditMode,children:"edit mode"}),(0,p.jsxs)("div",{className:v,children:[(0,p.jsx)("div",{className:P,children:e.profile.fullName}),(0,p.jsx)(D,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),(0,p.jsxs)("div",{className:I,children:[(0,p.jsx)("b",{children:"employment: "}),e.profile.lookingForAJob?"Looking for a job!":"I'm already employed"]}),(0,p.jsxs)("div",{className:b,children:[(0,p.jsx)("b",{children:"skills:"})," ",e.profile.lookingForAJobDescription]}),(0,p.jsxs)("div",{className:N,children:[(0,p.jsx)("b",{children:"about me:"})," ",e.profile.aboutMe]}),(0,p.jsxs)("div",{className:S,children:[(0,p.jsx)("div",{className:U,children:"contacts:"}),(0,p.jsx)("div",{className:y,children:Object.keys(e.profile.contacts).map((function(s){return(0,p.jsx)(L,{contactTitle:s,contactValue:e.profile.contacts[s]},s)}))})]})]})]})},R=function(e){var s=(0,l.useState)(!1),t=(0,h.Z)(s,2),r=t[0],o=t[1];if(!e.profile)return(0,p.jsx)(_.Z,{});return(0,p.jsxs)("div",{className:j,children:[(0,p.jsx)("img",{className:x,src:e.profile.photos.large?e.profile.photos.large:V,alt:"avatar"}),e.isOwner&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{id:"avatarInput",className:Z,type:"file",onChange:function(s){s.target.files.length&&e.savePhoto(s.target.files[0])}}),(0,p.jsxs)("div",{className:O,onClick:function(e){e.preventDefault(),document.getElementById("avatarInput").click()},children:["\u273f ",(0,p.jsx)("span",{className:F,children:"Upload photo"})]})]}),r?(0,p.jsx)(z,{initialValues:e.profile,profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,isOwner:e.isOwner,onSubmit:function(s){e.saveProfile(s).then((function(){o(!1)}))}}):(0,p.jsx)(q,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,isOwner:e.isOwner,goToEditMode:function(){o(!0)}})]})},X=t(2982),K=t(8008);var Q=t.p+"static/media/icon_liked.43de9c4003eb317a4ca47f5771d2d0e7.svg",W="Post_item__IVs4O",H="Post_post_wrap__zYVt2",Y="Post_avatar__6eGNa",$="Post_likes__3e+38",ee=function(e){return(0,p.jsxs)("div",{className:W,children:[(0,p.jsxs)("div",{className:H,children:[(0,p.jsx)("img",{className:Y,src:K,alt:"avatar"}),(0,p.jsx)("p",{children:e.message})]}),(0,p.jsxs)("div",{className:$,children:[(0,p.jsx)("img",{src:Q,alt:"likes"}),(0,p.jsx)("span",{children:e.count})]})]})},se="MyPosts_button__1+FKV",te="MyPosts_title__VyQI1",re="MyPosts_posts__TqAU7",oe="MyPosts_textarea__El2JB",ae=t(6139),ie=(0,A.D)(20),ne=(0,M.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,p.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,p.jsx)(ae.Z,{component:E.gx,name:"newPostText",placeholder:"Enter your message",className:oe,validate:[A.C,ie],type:"textarea"}),(0,p.jsx)("button",{className:se,children:"Add post"})]})})),le=(0,l.memo)((function(e){var s=(0,X.Z)(e.posts).reverse().map((function(e){return(0,p.jsx)(ee,{message:e.post,count:e.likesCount},e.id)}));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:te,children:"My posts"}),(0,p.jsx)(ne,{onSubmit:function(s){e.addPost(s.newPostText)}}),(0,p.jsx)("div",{className:re,children:s})]})})),ce=(0,c.qC)((0,u.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(s){e((0,f.Wl)(s))}}})))(le),ue=function(e){return(0,p.jsxs)("div",{className:m,children:[(0,p.jsx)(R,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,p.jsx)(ce,{})]})},fe=function(e){(0,i.Z)(t,e);var s=(0,n.Z)(t);function t(){return(0,o.Z)(this,t),s.apply(this,arguments)}return(0,a.Z)(t,[{key:"refreshProfile",value:function(){var e=this.props.router.params.userId;e||(e=this.props.authorizedUserId)||this.props.router.navigate("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s,t){this.props.router.params.userId!==e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,p.jsx)(ue,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus}))}}]),t}(l.Component),de=(0,c.qC)((0,u.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:f.et,getUserStatus:f.Tq,updateUserStatus:f.OL,savePhoto:f.Ju,saveProfile:f.Ii}),(function(e){return function(s){var t=(0,d.bS)("/profile/:userId/"),o=(0,d.TH)(),a=(0,d.s0)(),i=(0,d.UO)();return(0,p.jsx)(e,(0,r.Z)((0,r.Z)({},s),{},{router:{match:t,location:o,navigate:a,params:i}}))}}))(fe)},4240:function(e,s,t){e.exports=t.p+"static/media/avatar-wh.486e31f96fe3d177b122.png"},8008:function(e,s,t){e.exports=t.p+"static/media/avatar_own.aa75b7dbc1822fa96e84.jpg"}}]);
//# sourceMappingURL=698.ad43eb28.chunk.js.map